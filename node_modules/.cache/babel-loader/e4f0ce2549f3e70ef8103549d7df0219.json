{"ast":null,"code":"var _jsxFileName = \"/Users/thomas/Documents/pancake-frontend/pankcake-frontend/src/views/Predictions/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef } from 'react';\nimport { useWeb3React } from '@web3-react/core';\nimport { Helmet } from 'react-helmet-async';\nimport { useMatchBreakpoints, useModal } from '@pancakeswap/uikit';\nimport { useAppDispatch } from 'state';\nimport { useGetPredictionsStatus, useIsChartPaneOpen } from 'state/predictions/hooks';\nimport { useInitialBlock } from 'state/block/hooks';\nimport { initializePredictions } from 'state/predictions';\nimport { PredictionStatus } from 'state/types';\nimport usePersistState from 'hooks/usePersistState';\nimport PageLoader from 'components/Loader/PageLoader';\nimport usePollOraclePrice from './hooks/usePollOraclePrice';\nimport usePollPredictions from './hooks/usePollPredictions';\nimport Container from './components/Container';\nimport CollectWinningsPopup from './components/CollectWinningsPopup';\nimport SwiperProvider from './context/SwiperProvider';\nimport Desktop from './Desktop';\nimport Mobile from './Mobile';\nimport RiskDisclaimer from './components/RiskDisclaimer';\nimport ChartDisclaimer from './components/ChartDisclaimer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Predictions = () => {\n  _s();\n\n  const {\n    isXl\n  } = useMatchBreakpoints();\n  const [hasAcceptedRisk, setHasAcceptedRisk] = usePersistState(false, {\n    localStorageKey: 'pancake_predictions_accepted_risk'\n  });\n  const [hasAcceptedChart, setHasAcceptedChart] = usePersistState(false, {\n    localStorageKey: 'pancake_predictions_chart'\n  });\n  const {\n    account\n  } = useWeb3React();\n  const status = useGetPredictionsStatus();\n  const isChartPaneOpen = useIsChartPaneOpen();\n  const dispatch = useAppDispatch();\n  const initialBlock = useInitialBlock();\n  const isDesktop = isXl;\n\n  const handleAcceptRiskSuccess = () => setHasAcceptedRisk(true);\n\n  const handleAcceptChart = () => setHasAcceptedChart(true);\n\n  const [onPresentRiskDisclaimer] = useModal( /*#__PURE__*/_jsxDEV(RiskDisclaimer, {\n    onSuccess: handleAcceptRiskSuccess\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 46\n  }, this), false);\n  const [onPresentChartDisclaimer] = useModal( /*#__PURE__*/_jsxDEV(ChartDisclaimer, {\n    onSuccess: handleAcceptChart\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 47\n  }, this), false); // TODO: memoize modal's handlers\n\n  const onPresentRiskDisclaimerRef = useRef(onPresentRiskDisclaimer);\n  const onPresentChartDisclaimerRef = useRef(onPresentChartDisclaimer); // Disclaimer\n\n  useEffect(() => {\n    if (!hasAcceptedRisk) {\n      onPresentRiskDisclaimerRef.current();\n    }\n  }, [hasAcceptedRisk, onPresentRiskDisclaimerRef]); // Chart Disclaimer\n\n  useEffect(() => {\n    if (!hasAcceptedChart && isChartPaneOpen) {\n      onPresentChartDisclaimerRef.current();\n    }\n  }, [onPresentChartDisclaimerRef, hasAcceptedChart, isChartPaneOpen]);\n  useEffect(() => {\n    if (initialBlock > 0) {\n      // Do not start initialization until the first block has been retrieved\n      dispatch(initializePredictions(account));\n    }\n  }, [initialBlock, dispatch, account]);\n  usePollPredictions();\n  usePollOraclePrice();\n\n  if (status === PredictionStatus.INITIAL) {\n    return /*#__PURE__*/_jsxDEV(PageLoader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"script\", {\n        src: \"https://s3.tradingview.com/tv.js\",\n        type: \"text/javascript\",\n        id: \"tradingViewWidget\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SwiperProvider, {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: [isDesktop ? /*#__PURE__*/_jsxDEV(Desktop, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 24\n        }, this) : /*#__PURE__*/_jsxDEV(Mobile, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 38\n        }, this), /*#__PURE__*/_jsxDEV(CollectWinningsPopup, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Predictions, \"b49upazuDdq85Xqlio63t4v8Eb4=\", false, function () {\n  return [useMatchBreakpoints, usePersistState, usePersistState, useWeb3React, useGetPredictionsStatus, useIsChartPaneOpen, useAppDispatch, useInitialBlock, useModal, useModal, usePollPredictions, usePollOraclePrice];\n});\n\n_c = Predictions;\nexport default Predictions;\n\nvar _c;\n\n$RefreshReg$(_c, \"Predictions\");","map":{"version":3,"sources":["/Users/thomas/Documents/pancake-frontend/pankcake-frontend/src/views/Predictions/index.tsx"],"names":["React","useEffect","useRef","useWeb3React","Helmet","useMatchBreakpoints","useModal","useAppDispatch","useGetPredictionsStatus","useIsChartPaneOpen","useInitialBlock","initializePredictions","PredictionStatus","usePersistState","PageLoader","usePollOraclePrice","usePollPredictions","Container","CollectWinningsPopup","SwiperProvider","Desktop","Mobile","RiskDisclaimer","ChartDisclaimer","Predictions","isXl","hasAcceptedRisk","setHasAcceptedRisk","localStorageKey","hasAcceptedChart","setHasAcceptedChart","account","status","isChartPaneOpen","dispatch","initialBlock","isDesktop","handleAcceptRiskSuccess","handleAcceptChart","onPresentRiskDisclaimer","onPresentChartDisclaimer","onPresentRiskDisclaimerRef","onPresentChartDisclaimerRef","current","INITIAL"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { Helmet } from 'react-helmet-async'\nimport { useMatchBreakpoints, useModal } from '@pancakeswap/uikit'\nimport { useAppDispatch } from 'state'\nimport { useGetPredictionsStatus, useIsChartPaneOpen } from 'state/predictions/hooks'\nimport { useInitialBlock } from 'state/block/hooks'\nimport { initializePredictions } from 'state/predictions'\nimport { PredictionStatus } from 'state/types'\nimport usePersistState from 'hooks/usePersistState'\nimport PageLoader from 'components/Loader/PageLoader'\nimport usePollOraclePrice from './hooks/usePollOraclePrice'\nimport usePollPredictions from './hooks/usePollPredictions'\nimport Container from './components/Container'\nimport CollectWinningsPopup from './components/CollectWinningsPopup'\nimport SwiperProvider from './context/SwiperProvider'\nimport Desktop from './Desktop'\nimport Mobile from './Mobile'\nimport RiskDisclaimer from './components/RiskDisclaimer'\nimport ChartDisclaimer from './components/ChartDisclaimer'\n\nconst Predictions = () => {\n  const { isXl } = useMatchBreakpoints()\n  const [hasAcceptedRisk, setHasAcceptedRisk] = usePersistState(false, {\n    localStorageKey: 'pancake_predictions_accepted_risk',\n  })\n  const [hasAcceptedChart, setHasAcceptedChart] = usePersistState(false, {\n    localStorageKey: 'pancake_predictions_chart',\n  })\n  const { account } = useWeb3React()\n  const status = useGetPredictionsStatus()\n  const isChartPaneOpen = useIsChartPaneOpen()\n  const dispatch = useAppDispatch()\n  const initialBlock = useInitialBlock()\n  const isDesktop = isXl\n  const handleAcceptRiskSuccess = () => setHasAcceptedRisk(true)\n  const handleAcceptChart = () => setHasAcceptedChart(true)\n  const [onPresentRiskDisclaimer] = useModal(<RiskDisclaimer onSuccess={handleAcceptRiskSuccess} />, false)\n  const [onPresentChartDisclaimer] = useModal(<ChartDisclaimer onSuccess={handleAcceptChart} />, false)\n\n  // TODO: memoize modal's handlers\n  const onPresentRiskDisclaimerRef = useRef(onPresentRiskDisclaimer)\n  const onPresentChartDisclaimerRef = useRef(onPresentChartDisclaimer)\n\n  // Disclaimer\n  useEffect(() => {\n    if (!hasAcceptedRisk) {\n      onPresentRiskDisclaimerRef.current()\n    }\n  }, [hasAcceptedRisk, onPresentRiskDisclaimerRef])\n\n  // Chart Disclaimer\n  useEffect(() => {\n    if (!hasAcceptedChart && isChartPaneOpen) {\n      onPresentChartDisclaimerRef.current()\n    }\n  }, [onPresentChartDisclaimerRef, hasAcceptedChart, isChartPaneOpen])\n\n  useEffect(() => {\n    if (initialBlock > 0) {\n      // Do not start initialization until the first block has been retrieved\n      dispatch(initializePredictions(account))\n    }\n  }, [initialBlock, dispatch, account])\n\n  usePollPredictions()\n  usePollOraclePrice()\n\n  if (status === PredictionStatus.INITIAL) {\n    return <PageLoader />\n  }\n\n  return (\n    <>\n      <Helmet>\n        <script src=\"https://s3.tradingview.com/tv.js\" type=\"text/javascript\" id=\"tradingViewWidget\" />\n      </Helmet>\n      <SwiperProvider>\n        <Container>\n          {isDesktop ? <Desktop /> : <Mobile />}\n          <CollectWinningsPopup />\n        </Container>\n      </SwiperProvider>\n    </>\n  )\n}\n\nexport default Predictions\n"]},"metadata":{},"sourceType":"module"}