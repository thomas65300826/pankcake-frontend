{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport identity from 'lodash/identity';\nimport { useEffect, useState } from 'react';\nconst defaultOptions = {\n  hydrate: identity,\n  dehydrate: identity\n};\n/**\n * Same as \"useState\" but saves the value to local storage each time it changes\n */\n\nconst usePersistState = (initialValue, userOptions) => {\n  _s();\n\n  const {\n    localStorageKey,\n    hydrate,\n    dehydrate\n  } = { ...defaultOptions,\n    ...userOptions\n  };\n  const [value, setValue] = useState(() => {\n    try {\n      const valueFromLS = localStorage.getItem(localStorageKey);\n      return valueFromLS ? hydrate(JSON.parse(valueFromLS)) : initialValue;\n    } catch (error) {\n      return initialValue;\n    }\n  });\n  useEffect(() => {\n    localStorage.setItem(localStorageKey, JSON.stringify(dehydrate(value)));\n  }, [value, localStorageKey, dehydrate]);\n  return [value, setValue];\n};\n\n_s(usePersistState, \"v5srVCQ7mGcmfLyVz+/yRQMuEBY=\");\n\nexport default usePersistState;","map":{"version":3,"sources":["/Users/thomas/Documents/pancake-frontend/pankcake-frontend/src/hooks/usePersistState.ts"],"names":["identity","useEffect","useState","defaultOptions","hydrate","dehydrate","usePersistState","initialValue","userOptions","localStorageKey","value","setValue","valueFromLS","localStorage","getItem","JSON","parse","error","setItem","stringify"],"mappings":";;AAAA,OAAOA,QAAP,MAAqB,iBAArB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAQA,MAAMC,cAAc,GAAG;AACrBC,EAAAA,OAAO,EAAEJ,QADY;AAErBK,EAAAA,SAAS,EAAEL;AAFU,CAAvB;AAKA;AACA;AACA;;AACA,MAAMM,eAAe,GAAG,CAACC,YAAD,EAAoBC,WAApB,KAA4D;AAAA;;AAClF,QAAM;AAAEC,IAAAA,eAAF;AAAmBL,IAAAA,OAAnB;AAA4BC,IAAAA;AAA5B,MAA0C,EAAE,GAAGF,cAAL;AAAqB,OAAGK;AAAxB,GAAhD;AACA,QAAM,CAACE,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,MAAM;AACvC,QAAI;AACF,YAAMU,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqBL,eAArB,CAApB;AAEA,aAAOG,WAAW,GAAGR,OAAO,CAACW,IAAI,CAACC,KAAL,CAAWJ,WAAX,CAAD,CAAV,GAAsCL,YAAxD;AACD,KAJD,CAIE,OAAOU,KAAP,EAAc;AACd,aAAOV,YAAP;AACD;AACF,GARiC,CAAlC;AAUAN,EAAAA,SAAS,CAAC,MAAM;AACdY,IAAAA,YAAY,CAACK,OAAb,CAAqBT,eAArB,EAAsCM,IAAI,CAACI,SAAL,CAAed,SAAS,CAACK,KAAD,CAAxB,CAAtC;AACD,GAFQ,EAEN,CAACA,KAAD,EAAQD,eAAR,EAAyBJ,SAAzB,CAFM,CAAT;AAIA,SAAO,CAACK,KAAD,EAAQC,QAAR,CAAP;AACD,CAjBD;;GAAML,e;;AAmBN,eAAeA,eAAf","sourcesContent":["import identity from 'lodash/identity'\nimport { useEffect, useState } from 'react'\n\ninterface UsePersistStateOptions {\n  localStorageKey: string\n  hydrate?: (value: any) => any\n  dehydrate?: (value: any) => any\n}\n\nconst defaultOptions = {\n  hydrate: identity,\n  dehydrate: identity,\n}\n\n/**\n * Same as \"useState\" but saves the value to local storage each time it changes\n */\nconst usePersistState = (initialValue: any, userOptions: UsePersistStateOptions) => {\n  const { localStorageKey, hydrate, dehydrate } = { ...defaultOptions, ...userOptions }\n  const [value, setValue] = useState(() => {\n    try {\n      const valueFromLS = localStorage.getItem(localStorageKey)\n\n      return valueFromLS ? hydrate(JSON.parse(valueFromLS)) : initialValue\n    } catch (error) {\n      return initialValue\n    }\n  })\n\n  useEffect(() => {\n    localStorage.setItem(localStorageKey, JSON.stringify(dehydrate(value)))\n  }, [value, localStorageKey, dehydrate])\n\n  return [value, setValue]\n}\n\nexport default usePersistState\n"]},"metadata":{},"sourceType":"module"}