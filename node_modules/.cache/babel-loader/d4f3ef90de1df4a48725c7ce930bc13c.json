{"ast":null,"code":"// Set of helper functions to facilitate wallet setup\nimport { BASE_BSC_SCAN_URL, BASE_URL } from 'config';\nimport { nodes } from './getRpcUrl';\n/**\n * Prompt the user to add BSC as a network on Metamask, or switch to BSC if the wallet is on a different network\n * @returns {boolean} true if the setup succeeded, false otherwise\n */\n\nexport const setupNetwork = async () => {\n  const provider = window.ethereum;\n\n  if (provider) {\n    const chainId = parseInt(process.env.REACT_APP_CHAIN_ID, 10);\n\n    try {\n      await provider.request({\n        method: 'wallet_addEthereumChain',\n        params: [{\n          chainId: `0x${chainId.toString(16)}`,\n          chainName: 'Binance Smart Chain Mainnet',\n          nativeCurrency: {\n            name: 'BNB',\n            symbol: 'bnb',\n            decimals: 18\n          },\n          rpcUrls: nodes,\n          blockExplorerUrls: [`${BASE_BSC_SCAN_URL}/`]\n        }]\n      });\n      return true;\n    } catch (error) {\n      console.error('Failed to setup the network in Metamask:', error);\n      return false;\n    }\n  } else {\n    console.error(\"Can't setup the BSC network on metamask because window.ethereum is undefined\");\n    return false;\n  }\n};\n/**\n * Prompt the user to add a custom token to metamask\n * @param tokenAddress\n * @param tokenSymbol\n * @param tokenDecimals\n * @returns {boolean} true if the token has been added, false otherwise\n */\n\nexport const registerToken = async (tokenAddress, tokenSymbol, tokenDecimals) => {\n  const tokenAdded = await window.ethereum.request({\n    method: 'wallet_watchAsset',\n    params: {\n      type: 'ERC20',\n      options: {\n        address: tokenAddress,\n        symbol: tokenSymbol,\n        decimals: tokenDecimals,\n        image: `${BASE_URL}/images/tokens/${tokenAddress}.png`\n      }\n    }\n  });\n  return tokenAdded;\n};","map":{"version":3,"sources":["/Users/thomas/Documents/pancake-frontend/src/utils/wallet.ts"],"names":["BASE_BSC_SCAN_URL","BASE_URL","nodes","setupNetwork","provider","window","ethereum","chainId","parseInt","process","env","REACT_APP_CHAIN_ID","request","method","params","toString","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","error","console","registerToken","tokenAddress","tokenSymbol","tokenDecimals","tokenAdded","type","options","address","image"],"mappings":"AAAA;AAEA,SAASA,iBAAT,EAA4BC,QAA5B,QAA4C,QAA5C;AACA,SAASC,KAAT,QAAsB,aAAtB;AAEA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,YAAY,GAAG,YAAY;AACtC,QAAMC,QAAQ,GAAGC,MAAM,CAACC,QAAxB;;AACA,MAAIF,QAAJ,EAAc;AACZ,UAAMG,OAAO,GAAGC,QAAQ,CAACC,OAAO,CAACC,GAAR,CAAYC,kBAAb,EAAiC,EAAjC,CAAxB;;AACA,QAAI;AACF,YAAMP,QAAQ,CAACQ,OAAT,CAAiB;AACrBC,QAAAA,MAAM,EAAE,yBADa;AAErBC,QAAAA,MAAM,EAAE,CACN;AACEP,UAAAA,OAAO,EAAG,KAAIA,OAAO,CAACQ,QAAR,CAAiB,EAAjB,CAAqB,EADrC;AAEEC,UAAAA,SAAS,EAAE,6BAFb;AAGEC,UAAAA,cAAc,EAAE;AACdC,YAAAA,IAAI,EAAE,KADQ;AAEdC,YAAAA,MAAM,EAAE,KAFM;AAGdC,YAAAA,QAAQ,EAAE;AAHI,WAHlB;AAQEC,UAAAA,OAAO,EAAEnB,KARX;AASEoB,UAAAA,iBAAiB,EAAE,CAAE,GAAEtB,iBAAkB,GAAtB;AATrB,SADM;AAFa,OAAjB,CAAN;AAgBA,aAAO,IAAP;AACD,KAlBD,CAkBE,OAAOuB,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAc,0CAAd,EAA0DA,KAA1D;AACA,aAAO,KAAP;AACD;AACF,GAxBD,MAwBO;AACLC,IAAAA,OAAO,CAACD,KAAR,CAAc,8EAAd;AACA,WAAO,KAAP;AACD;AACF,CA9BM;AAgCP;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAME,aAAa,GAAG,OAAOC,YAAP,EAA6BC,WAA7B,EAAkDC,aAAlD,KAA4E;AACvG,QAAMC,UAAU,GAAG,MAAMxB,MAAM,CAACC,QAAP,CAAgBM,OAAhB,CAAwB;AAC/CC,IAAAA,MAAM,EAAE,mBADuC;AAE/CC,IAAAA,MAAM,EAAE;AACNgB,MAAAA,IAAI,EAAE,OADA;AAENC,MAAAA,OAAO,EAAE;AACPC,QAAAA,OAAO,EAAEN,YADF;AAEPP,QAAAA,MAAM,EAAEQ,WAFD;AAGPP,QAAAA,QAAQ,EAAEQ,aAHH;AAIPK,QAAAA,KAAK,EAAG,GAAEhC,QAAS,kBAAiByB,YAAa;AAJ1C;AAFH;AAFuC,GAAxB,CAAzB;AAaA,SAAOG,UAAP;AACD,CAfM","sourcesContent":["// Set of helper functions to facilitate wallet setup\n\nimport { BASE_BSC_SCAN_URL, BASE_URL } from 'config'\nimport { nodes } from './getRpcUrl'\n\n/**\n * Prompt the user to add BSC as a network on Metamask, or switch to BSC if the wallet is on a different network\n * @returns {boolean} true if the setup succeeded, false otherwise\n */\nexport const setupNetwork = async () => {\n  const provider = window.ethereum\n  if (provider) {\n    const chainId = parseInt(process.env.REACT_APP_CHAIN_ID, 10)\n    try {\n      await provider.request({\n        method: 'wallet_addEthereumChain',\n        params: [\n          {\n            chainId: `0x${chainId.toString(16)}`,\n            chainName: 'Binance Smart Chain Mainnet',\n            nativeCurrency: {\n              name: 'BNB',\n              symbol: 'bnb',\n              decimals: 18,\n            },\n            rpcUrls: nodes,\n            blockExplorerUrls: [`${BASE_BSC_SCAN_URL}/`],\n          },\n        ],\n      })\n      return true\n    } catch (error) {\n      console.error('Failed to setup the network in Metamask:', error)\n      return false\n    }\n  } else {\n    console.error(\"Can't setup the BSC network on metamask because window.ethereum is undefined\")\n    return false\n  }\n}\n\n/**\n * Prompt the user to add a custom token to metamask\n * @param tokenAddress\n * @param tokenSymbol\n * @param tokenDecimals\n * @returns {boolean} true if the token has been added, false otherwise\n */\nexport const registerToken = async (tokenAddress: string, tokenSymbol: string, tokenDecimals: number) => {\n  const tokenAdded = await window.ethereum.request({\n    method: 'wallet_watchAsset',\n    params: {\n      type: 'ERC20',\n      options: {\n        address: tokenAddress,\n        symbol: tokenSymbol,\n        decimals: tokenDecimals,\n        image: `${BASE_URL}/images/tokens/${tokenAddress}.png`,\n      },\n    },\n  })\n\n  return tokenAdded\n}\n"]},"metadata":{},"sourceType":"module"}