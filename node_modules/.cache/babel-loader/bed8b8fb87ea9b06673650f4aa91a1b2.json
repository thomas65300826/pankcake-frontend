{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport { useEffect, useMemo } from 'react';\nimport BigNumber from 'bignumber.js';\nimport { useWeb3React } from '@web3-react/core';\nimport { useSelector } from 'react-redux';\nimport { useAppDispatch } from 'state';\nimport { simpleRpcProvider } from 'utils/providers';\nimport useRefresh from 'hooks/useRefresh';\nimport { fetchPoolsPublicDataAsync, fetchPoolsUserDataAsync, fetchCakeVaultPublicData, fetchCakeVaultUserData, fetchCakeVaultFees, fetchPoolsStakingLimitsAsync } from '.';\nimport { transformPool } from './helpers';\nexport const useFetchPublicPoolsData = () => {\n  _s();\n\n  const dispatch = useAppDispatch();\n  const {\n    slowRefresh\n  } = useRefresh();\n  useEffect(() => {\n    const fetchPoolsPublicData = async () => {\n      const blockNumber = await simpleRpcProvider.getBlockNumber();\n      dispatch(fetchPoolsPublicDataAsync(blockNumber));\n    };\n\n    fetchPoolsPublicData();\n    dispatch(fetchPoolsStakingLimitsAsync());\n  }, [dispatch, slowRefresh]);\n};\n\n_s(useFetchPublicPoolsData, \"wXP7/5vEIZ/qynMYpAGvmXRZfss=\", false, function () {\n  return [useAppDispatch, useRefresh];\n});\n\nexport const usePools = account => {\n  _s2();\n\n  const {\n    fastRefresh\n  } = useRefresh();\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    if (account) {\n      dispatch(fetchPoolsUserDataAsync(account));\n    }\n  }, [account, dispatch, fastRefresh]);\n  const {\n    pools,\n    userDataLoaded\n  } = useSelector(state => ({\n    pools: state.pools.data,\n    userDataLoaded: state.pools.userDataLoaded\n  }));\n  return {\n    pools: pools.map(transformPool),\n    userDataLoaded\n  };\n};\n\n_s2(usePools, \"VWrZ+2b3tUz/gcjLdR//y/C6C5s=\", false, function () {\n  return [useRefresh, useAppDispatch, useSelector];\n});\n\nexport const useFetchCakeVault = () => {\n  _s3();\n\n  const {\n    account\n  } = useWeb3React();\n  const {\n    fastRefresh\n  } = useRefresh();\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    dispatch(fetchCakeVaultPublicData());\n  }, [dispatch, fastRefresh]);\n  useEffect(() => {\n    dispatch(fetchCakeVaultUserData({\n      account\n    }));\n  }, [dispatch, fastRefresh, account]);\n  useEffect(() => {\n    dispatch(fetchCakeVaultFees());\n  }, [dispatch]);\n};\n\n_s3(useFetchCakeVault, \"pDYnJ+ssV2U9HKPEmASotePCeog=\", false, function () {\n  return [useWeb3React, useRefresh, useAppDispatch];\n});\n\nexport const useCakeVault = () => {\n  _s4();\n\n  const {\n    totalShares: totalSharesAsString,\n    pricePerFullShare: pricePerFullShareAsString,\n    totalCakeInVault: totalCakeInVaultAsString,\n    estimatedCakeBountyReward: estimatedCakeBountyRewardAsString,\n    totalPendingCakeHarvest: totalPendingCakeHarvestAsString,\n    fees: {\n      performanceFee,\n      callFee,\n      withdrawalFee,\n      withdrawalFeePeriod\n    },\n    userData: {\n      isLoading,\n      userShares: userSharesAsString,\n      cakeAtLastUserAction: cakeAtLastUserActionAsString,\n      lastDepositedTime,\n      lastUserActionTime\n    }\n  } = useSelector(state => state.pools.cakeVault);\n  const estimatedCakeBountyReward = useMemo(() => {\n    return new BigNumber(estimatedCakeBountyRewardAsString);\n  }, [estimatedCakeBountyRewardAsString]);\n  const totalPendingCakeHarvest = useMemo(() => {\n    return new BigNumber(totalPendingCakeHarvestAsString);\n  }, [totalPendingCakeHarvestAsString]);\n  const totalShares = useMemo(() => {\n    return new BigNumber(totalSharesAsString);\n  }, [totalSharesAsString]);\n  const pricePerFullShare = useMemo(() => {\n    return new BigNumber(pricePerFullShareAsString);\n  }, [pricePerFullShareAsString]);\n  const totalCakeInVault = useMemo(() => {\n    return new BigNumber(totalCakeInVaultAsString);\n  }, [totalCakeInVaultAsString]);\n  const userShares = useMemo(() => {\n    return new BigNumber(userSharesAsString);\n  }, [userSharesAsString]);\n  const cakeAtLastUserAction = useMemo(() => {\n    return new BigNumber(cakeAtLastUserActionAsString);\n  }, [cakeAtLastUserActionAsString]);\n  return {\n    totalShares,\n    pricePerFullShare,\n    totalCakeInVault,\n    estimatedCakeBountyReward,\n    totalPendingCakeHarvest,\n    fees: {\n      performanceFee,\n      callFee,\n      withdrawalFee,\n      withdrawalFeePeriod\n    },\n    userData: {\n      isLoading,\n      userShares,\n      cakeAtLastUserAction,\n      lastDepositedTime,\n      lastUserActionTime\n    }\n  };\n};\n\n_s4(useCakeVault, \"YV6Q9wLle93kMiaCPuN9BNIY1fg=\", false, function () {\n  return [useSelector];\n});","map":{"version":3,"sources":["/Users/thomas/Documents/PycharmProjects/pancake-frontend/src/state/pools/hooks.ts"],"names":["useEffect","useMemo","BigNumber","useWeb3React","useSelector","useAppDispatch","simpleRpcProvider","useRefresh","fetchPoolsPublicDataAsync","fetchPoolsUserDataAsync","fetchCakeVaultPublicData","fetchCakeVaultUserData","fetchCakeVaultFees","fetchPoolsStakingLimitsAsync","transformPool","useFetchPublicPoolsData","dispatch","slowRefresh","fetchPoolsPublicData","blockNumber","getBlockNumber","usePools","account","fastRefresh","pools","userDataLoaded","state","data","map","useFetchCakeVault","useCakeVault","totalShares","totalSharesAsString","pricePerFullShare","pricePerFullShareAsString","totalCakeInVault","totalCakeInVaultAsString","estimatedCakeBountyReward","estimatedCakeBountyRewardAsString","totalPendingCakeHarvest","totalPendingCakeHarvestAsString","fees","performanceFee","callFee","withdrawalFee","withdrawalFeePeriod","userData","isLoading","userShares","userSharesAsString","cakeAtLastUserAction","cakeAtLastUserActionAsString","lastDepositedTime","lastUserActionTime","cakeVault"],"mappings":"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","sourcesContent":["import { useEffect, useMemo } from 'react'\nimport BigNumber from 'bignumber.js'\nimport { useWeb3React } from '@web3-react/core'\nimport { useSelector } from 'react-redux'\nimport { useAppDispatch } from 'state'\nimport { simpleRpcProvider } from 'utils/providers'\nimport useRefresh from 'hooks/useRefresh'\nimport {\n  fetchPoolsPublicDataAsync,\n  fetchPoolsUserDataAsync,\n  fetchCakeVaultPublicData,\n  fetchCakeVaultUserData,\n  fetchCakeVaultFees,\n  fetchPoolsStakingLimitsAsync,\n} from '.'\nimport { State, Pool } from '../types'\nimport { transformPool } from './helpers'\n\nexport const useFetchPublicPoolsData = () => {\n  const dispatch = useAppDispatch()\n  const { slowRefresh } = useRefresh()\n\n  useEffect(() => {\n    const fetchPoolsPublicData = async () => {\n      const blockNumber = await simpleRpcProvider.getBlockNumber()\n      dispatch(fetchPoolsPublicDataAsync(blockNumber))\n    }\n\n    fetchPoolsPublicData()\n    dispatch(fetchPoolsStakingLimitsAsync())\n  }, [dispatch, slowRefresh])\n}\n\nexport const usePools = (account): { pools: Pool[]; userDataLoaded: boolean } => {\n  const { fastRefresh } = useRefresh()\n  const dispatch = useAppDispatch()\n  useEffect(() => {\n    if (account) {\n      dispatch(fetchPoolsUserDataAsync(account))\n    }\n  }, [account, dispatch, fastRefresh])\n\n  const { pools, userDataLoaded } = useSelector((state: State) => ({\n    pools: state.pools.data,\n    userDataLoaded: state.pools.userDataLoaded,\n  }))\n  return { pools: pools.map(transformPool), userDataLoaded }\n}\n\nexport const useFetchCakeVault = () => {\n  const { account } = useWeb3React()\n  const { fastRefresh } = useRefresh()\n  const dispatch = useAppDispatch()\n\n  useEffect(() => {\n    dispatch(fetchCakeVaultPublicData())\n  }, [dispatch, fastRefresh])\n\n  useEffect(() => {\n    dispatch(fetchCakeVaultUserData({ account }))\n  }, [dispatch, fastRefresh, account])\n\n  useEffect(() => {\n    dispatch(fetchCakeVaultFees())\n  }, [dispatch])\n}\n\nexport const useCakeVault = () => {\n  const {\n    totalShares: totalSharesAsString,\n    pricePerFullShare: pricePerFullShareAsString,\n    totalCakeInVault: totalCakeInVaultAsString,\n    estimatedCakeBountyReward: estimatedCakeBountyRewardAsString,\n    totalPendingCakeHarvest: totalPendingCakeHarvestAsString,\n    fees: { performanceFee, callFee, withdrawalFee, withdrawalFeePeriod },\n    userData: {\n      isLoading,\n      userShares: userSharesAsString,\n      cakeAtLastUserAction: cakeAtLastUserActionAsString,\n      lastDepositedTime,\n      lastUserActionTime,\n    },\n  } = useSelector((state: State) => state.pools.cakeVault)\n\n  const estimatedCakeBountyReward = useMemo(() => {\n    return new BigNumber(estimatedCakeBountyRewardAsString)\n  }, [estimatedCakeBountyRewardAsString])\n\n  const totalPendingCakeHarvest = useMemo(() => {\n    return new BigNumber(totalPendingCakeHarvestAsString)\n  }, [totalPendingCakeHarvestAsString])\n\n  const totalShares = useMemo(() => {\n    return new BigNumber(totalSharesAsString)\n  }, [totalSharesAsString])\n\n  const pricePerFullShare = useMemo(() => {\n    return new BigNumber(pricePerFullShareAsString)\n  }, [pricePerFullShareAsString])\n\n  const totalCakeInVault = useMemo(() => {\n    return new BigNumber(totalCakeInVaultAsString)\n  }, [totalCakeInVaultAsString])\n\n  const userShares = useMemo(() => {\n    return new BigNumber(userSharesAsString)\n  }, [userSharesAsString])\n\n  const cakeAtLastUserAction = useMemo(() => {\n    return new BigNumber(cakeAtLastUserActionAsString)\n  }, [cakeAtLastUserActionAsString])\n\n  return {\n    totalShares,\n    pricePerFullShare,\n    totalCakeInVault,\n    estimatedCakeBountyReward,\n    totalPendingCakeHarvest,\n    fees: {\n      performanceFee,\n      callFee,\n      withdrawalFee,\n      withdrawalFeePeriod,\n    },\n    userData: {\n      isLoading,\n      userShares,\n      cakeAtLastUserAction,\n      lastDepositedTime,\n      lastUserActionTime,\n    },\n  }\n}\n"]},"metadata":{},"sourceType":"module"}